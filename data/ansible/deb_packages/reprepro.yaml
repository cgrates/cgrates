---
- name: Check if /var/packages/debian directory exists
  become: true
  ansible.builtin.file:
    path: /var/packages/debian
    state: directory

- name: Check if /var/packages/debian/conf directory exists
  become: true
  ansible.builtin.file:
    path: /var/packages/debian/conf
    state: directory

- name: Check if /var/packages/debian/incoming directory exists
  become: true
  ansible.builtin.file:
    path: /var/packages/debian/incoming
    state: directory

- name: Add distributions file in reprepro
  become: true
  ansible.builtin.template:
    src: distributions.conf.j2
    dest: "/var/packages/debian/conf/distributions"
    mode: "0600"
    owner: "{{ rootUser }}"

- name: Add distributions file in reprepro
  become: true
  ansible.builtin.template:
    src: options.conf.j2
    dest: "/var/packages/debian/conf/options"
    mode: "0600"
    owner: "{{ rootUser }}"

- name: Create override.testing file
  become: true
  ansible.builtin.copy:
    content: ""
    dest: /var/packages/debian/conf/override.testing
    force: false
    group: root
    owner: root
